<!DOCTYPE html>
<html>
  <head>
    <title>Rock Paper Scissor</title>
  </head>

  <body>
    <script>
      function game() {
        let computerScore = 0;
        let userScore = 0;
        for(count = 0; count < 5; count++) {
          let userChoice = prompt("Rock, Paper or Scissors?");
          let computerSelection = computerPlay();
            let result = playRound(userChoice, computerSelection);
            if (result == "draw") {
              console.log("draw");
              count--;
            } else if (result == "computer") {
              console.log("Computer Wins! " + computerSelection + " beats "  + userChoice + "!");
              computerScore++;
            } else if (result == "user") {
              console.log("User Wins! " + userChoice + " beats " + computerSelection + "!");
              userScore++;
            } else {
            console.log("Invalid entry! Try again!");
            count--;
          }
        }
        if (computerScore > userScore) {
          console.log("Computer won with a score of " + computerScore + " vs. " + userScore + "!");
        } else {
          console.log("User won with a score of " + userScore + " vs. " + computerScore + "!");
        }
      }
      function computerPlay() {
        let choices = ["rock", "paper", "scissor"];
        let rand = Math.random() * 3;
        return choices[Math.floor(rand)];
      }
      function playRound(playerSelection, computerSelection) {
        if (checkValid(playerSelection) == true) {
          //checks for a draw
          if (checkDraw(playerSelection, computerSelection) == true) {
            return "draw";
          //checks if computer won
          } else if (checkComputerWins(playerSelection, computerSelection) == true) {
            return "computer";
          //otherwise user won
          } else {
            return "user";
          }
        //returns false if the users input isn't rock, paper or scissors
        } else {
          return false;
        }
      }
      //checks if the users input is either rock, paper or scissors and is case insensitive
      function checkValid(selection) {
        selection = selection.toLowerCase();
        if (selection == "rock") {
          return true;
        } else if (selection == "paper") {
          return true;
        } else if (selection == "scissors") {
          return true;
        } else {
          return false;
        }
      }
      //checks if the users input and computers input is the same
      function checkDraw(playerSelection, computerSelection) {
        if(playerSelection == computerSelection) {
          return true;
        } else {
          return false;
        }
      }
      //checks if the computer wins
      function checkComputerWins(playerSelection, computerSelection) {
        if (computerSelection == "rock" && playerSelection == "scissors") {
          return true;
        } else if (computerSelection == "scissors" && playerSelection == "paper") {
          return true;
        } else if (computerSelection == "paper" && playerSelection == "rock") {
          return true;
        } else {
          return false;
        }
      }
      //runs the game
      game();
    </script>
  </body>
</html>
